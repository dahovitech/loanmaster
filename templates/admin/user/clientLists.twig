{% extends '@admin/base.html.twig' %}

{% block title %}Listes des clients
{% endblock %}

{% block body %}

	<!--breadcrumb-->
	<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
		<div class="breadcrumb-title pe-3">Listes des clients</div>
		<div class="ps-3">
			<nav aria-label="breadcrumb">
				<ol class="breadcrumb mb-0 p-0">
					<li class="breadcrumb-item">
						<a href="javascript:;">
							<i class="bx bx-home-alt"></i>
						</a>
					</li>
					<li class="breadcrumb-item active" aria-current="page">Listes des clients</li>
				</ol>
			</nav>
		</div>
	</div>
	<!--end breadcrumb-->
	<div class="row">
		<div class="col-md-12">
			<div class="card">
				<div class="card-body">
					<div class="table-responsive">
						<table id="tab2" class="table table-striped table-bordered" style="width:100%">
							<thead>
								<tr>
									<th>email</th>
									<th>Nom et prénom(s)</th>
									<th>Enabled</th>
									<th>Verified</th>
									<th>actions</th>
								</tr>
							</thead>
							<tbody>
								{% for user in users %}
									<tr>
										<td>{{ user.email }}</td>
										<td>{{ user.firstname }} {{ user.lastname }}</td>
										<td>{{ user.isEnabled ? 'Activé' : 'Désactivé' }}</td>
										{% set status = 'kyc.' ~ user.verificationStatus %}
										<td>{{ user.verificationStatus ?  status | trans : 'kyc.unverified'|trans }}</td>
										<td>
											<a href="{{ path('app_admin_clientShow', { id: user.id }) }}" class="btn btn-info btn-sm">Voir</a>
											    {% if user.accountType == 'individual' %}
													<a href="{{ path('app_admin_kyc_client', { id: user.id }) }}" class="btn btn-warning btn-sm">Vérifier KYC</a>

												{% elseif user.accountType == 'professional' %}
													<a href="{{ path('app_admin_kyc_pro_kyc', { id: user.id }) }}" class="btn btn-warning btn-sm">Vérifier KYC</a>

												{% endif %}

											<a class="btn btn-outline-primary btn btn-outline-primary btn-sm" href="{{ path('app_admin_active_account', {'id': user.id}) }}">
												{{ user.isEnabled ? 'Désactivé' : 'Activé' }}
											</a>
											<a class="btn btn-outline-danger btn btn-outline-danger btn-sm" href="{{ path('app_admin_delete_user', {'id': user.id}) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer cet utilisateur ?')">
												Supprimer
											</a>
										</td>
									</tr>
								{% else %}
									<tr>
										<td colspan="8">no records found</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>

{% endblock %}
