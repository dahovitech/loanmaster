/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/blurhash@2.0.5/dist/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],e=e=>{let r=0;for(let a=0;a<e.length;a++){let l=e[a];r=83*r+t.indexOf(l)}return r},r=(e,r)=>{var a="";for(let l=1;l<=r;l++){let h=Math.floor(e)/Math.pow(83,r-l)%83;a+=t[Math.floor(h)]}return a},a=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},l=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(12.92*e*255+.5):Math.trunc(255*(1.055*Math.pow(e,.4166666666666667)-.055)+.5)},h=(t,e)=>(t=>t<0?-1:1)(t)*Math.pow(Math.abs(t),e),o=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},n=t=>{if(!t||t.length<6)throw new o("The blurhash string must be at least 6 characters");let r=e(t[0]),a=Math.floor(r/9)+1,l=r%9+1;if(t.length!==4+2*l*a)throw new o(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*l*a}`)},s=t=>{try{n(t)}catch(t){return{result:!1,errorReason:t.message}}return{result:!0}},M=t=>{let e=t>>8&255,r=255&t;return[a(t>>16),a(e),a(r)]},f=(t,e)=>{let r=Math.floor(t/361),a=Math.floor(t/19)%19,l=t%19;return[h((r-9)/9,2)*e,h((a-9)/9,2)*e,h((l-9)/9,2)*e]},i=(t,r,a,h)=>{n(t),h|=1;let o=e(t[0]),s=Math.floor(o/9)+1,i=o%9+1,u=(e(t[1])+1)/166,m=new Array(i*s);for(let r=0;r<m.length;r++)if(0===r){let a=e(t.substring(2,6));m[r]=M(a)}else{let a=e(t.substring(4+2*r,6+2*r));m[r]=f(a,u*h)}let c=4*r,g=new Uint8ClampedArray(c*a);for(let t=0;t<a;t++)for(let e=0;e<r;e++){let h=0,o=0,n=0;for(let l=0;l<s;l++)for(let s=0;s<i;s++){let M=Math.cos(Math.PI*e*s/r)*Math.cos(Math.PI*t*l/a),f=m[s+l*i];h+=f[0]*M,o+=f[1]*M,n+=f[2]*M}let M=l(h),f=l(o),u=l(n);g[4*e+0+t*c]=M,g[4*e+1+t*c]=f,g[4*e+2+t*c]=u,g[4*e+3+t*c]=255}return g},u=(t,e,r,l)=>{let h=0,o=0,n=0,s=4*e;for(let M=0;M<e;M++){let e=4*M;for(let f=0;f<r;f++){let r=e+f*s,i=l(M,f);h+=i*a(t[r]),o+=i*a(t[r+1]),n+=i*a(t[r+2])}}let M=1/(e*r);return[h*M,o*M,n*M]},m=(t,e,a,n,s)=>{if(n<1||n>9||s<1||s>9)throw new o("BlurHash must have between 1 and 9 components");if(e*a*4!==t.length)throw new o("Width and height must match the pixels array");let M=[];for(let r=0;r<s;r++)for(let l=0;l<n;l++){let h=0==l&&0==r?1:2,o=u(t,e,a,((t,o)=>h*Math.cos(Math.PI*l*t/e)*Math.cos(Math.PI*r*o/a)));M.push(o)}let f,i=M[0],m=M.slice(1),c="";if(c+=r(n-1+9*(s-1),1),m.length>0){let t=Math.max(...m.map((t=>Math.max(...t)))),e=Math.floor(Math.max(0,Math.min(82,Math.floor(166*t-.5))));f=(e+1)/166,c+=r(e,1)}else f=1,c+=r(0,1);return c+=r((t=>(l(t[0])<<16)+(l(t[1])<<8)+l(t[2]))(i),4),m.forEach((t=>{c+=r(((t,e)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*h(t[0]/e,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*h(t[1]/e,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*h(t[2]/e,.5)+9.5)))))(t,f),2)})),c};export{o as ValidationError,i as decode,m as encode,s as isBlurhashValid};export default null;
